*Ruby* Rubyのよくわからない挙動(1)
## ===メソッド(比較演算子)の挙動がよくわからない。
クラス A を定義し、インスタンスを a に代入する。
!$ irb
!>> class A ; end
!class A ; end
!=> nil
!>> a = A.new
!a = A.new
!=> #<A:0x3637ec>

== がtrueになるのはわかる。
!>> a.class == A
!a.class == A
!=> true

=== では何故falseになるのか。
!>> a.class === A
!a.class === A
!=> false

=== がtrueになってくれないと === 演算子が適用される case 〜 when が使えない。
例えば、
!  case val.class
!  when Cell
!    Cell型の場合の処理
!  when Fixnum
!    Fixnum型の場合の処理
!  end
という記述はダメ。どれにもマッチしない。

こう書けばいけるけど、ちょっと苦しい。
!  case val.class.to_s
!  when "Cell"
!    Cell型の場合の処理
!  when "Fixnum"
!    Fixnum型の場合の処理
!  end

こんな場合Rubyの定石として、どう書くんだろう。

##(comment-data Grape %e5%8b%89%e5%bc%b7%e3%81%97%e5%a7%8b%e3%82%81%e3%81%9f%e3%81%b0%e3%81%8b%e3%82%8a%e3%81%aa%e3%81%ae%e3%81%a7%e3%80%81%e3%81%be%e3%81%a0%e4%bd%95%e3%81%a8%e3%82%82%e8%a8%80%e3%81%88%e3%81%be%e3%81%9b%e3%82%93%e3%81%8c%e3%80%81%0d%0aRuby%e3%81%ae%3d%3d%3d%e3%81%af%e3%80%81%e3%80%8c%e3%82%b5%e3%83%96%e3%82%af%e3%83%a9%e3%82%b9%e3%81%a7%e9%81%a9%e5%ae%9c%e5%86%8d%e5%ae%9a%e7%be%a9%e3%81%95%e3%82%8c%e3%82%8b%e3%80%8d%e3%81%a8%e3%81%82%e3%82%8b%e3%81%ae%e3%81%a7%e3%80%81%e3%82%aa%e3%83%96%e3%82%b8%e3%82%a7%e3%82%af%e3%83%88%e3%81%ab%e3%82%88%e3%81%a3%e3%81%a6%e6%8c%99%e5%8b%95%e3%81%8c%e9%81%95%e3%81%86%e5%8f%af%e8%83%bd%e6%80%a7%e3%81%8c%e3%81%82%e3%82%8a%e3%81%be%e3%81%99%e3%80%82%0d%0a%e3%81%a4%e3%81%be%e3%82%8a%e3%80%81%e5%ae%9f%e8%a3%85%e3%81%ab%e3%82%88%e3%81%a3%e3%81%a6%e3%81%af%e5%bf%85%e3%81%9a%e3%81%97%e3%82%82%e5%9e%8b%e3%81%8c%e5%90%8c%e3%81%98%e3%81%a7%e5%80%a4%e3%81%8c%e5%90%8c%e3%81%98%e6%99%82%e3%81%abTrue%e3%81%a8%e3%81%84%e3%81%86%e5%8b%95%e3%81%8d%e3%81%a7%e3%81%af%e3%81%aa%e3%81%84%e3%81%8b%e3%82%82%e3%81%97%e3%82%8c%e3%81%be%e3%81%9b%e3%82%93%e3%80%82%0d%0a%0d%0a%e7%9a%84%e5%a4%96%e3%82%8c%e3%81%aa%e7%ad%94%e3%81%88%e3%81%a7%e3%81%97%e3%81%9f%e3%82%89%e3%80%81%e3%81%99%e3%81%bf%e3%81%be%e3%81%9b%e3%82%93orz)
##(comment-data mogya %ef%bc%9e%e3%81%93%e3%82%93%e3%81%aa%e5%a0%b4%e5%90%88Ruby%e3%81%ae%e5%ae%9a%e7%9f%b3%e3%81%a8%e3%81%97%e3%81%a6%e3%80%81%e3%81%a9%e3%81%86%e6%9b%b8%e3%81%8f%e3%82%93%e3%81%a0%e3%82%8d%e3%81%86%e3%80%82%0d%0a%0d%0a%e3%81%93%e3%81%86%e3%82%89%e3%81%97%e3%81%84%e3%81%a7%e3%81%99%e3%80%82%0d%0a%20case%20val%0d%0a%20%20when%20Cell%0d%0a%20%20%20%20Cell%e5%9e%8b%e3%81%ae%e5%a0%b4%e5%90%88%e3%81%ae%e5%87%a6%e7%90%86%0d%0a%20%20when%20Fixnum%0d%0a%20%20%20%20Fixnum%e5%9e%8b%e3%81%ae%e5%a0%b4%e5%90%88%e3%81%ae%e5%87%a6%e7%90%86%0d%0a%20%20end%0d%0a%0d%0a%5bruby-list%3a10473%5dcase%20with%20Class%20%e3%81%8b%e3%82%89%e3%81%af%e3%81%98%e3%81%be%e3%82%8b%e4%b8%80%e9%80%a3%e3%81%ae%e3%82%b9%e3%83%ac%e3%83%83%e3%83%89%e3%81%ab%e6%9b%b8%e3%81%84%e3%81%a6%e3%81%82%e3%82%8a%e3%81%be%e3%81%97%e3%81%9f%e3%80%82%0d%0ahttp%3a%2f%2fblade.nagaokaut.ac.jp%2fcgi-bin%2fvframe.rb%2fruby%2fruby-list%2f10473%3f10428-11968%0d%0a%0d%0a%0d%0a)
##(comment-data kiyoka Grape%e3%81%95%e3%82%93%e3%80%81mogya%e3%81%95%e3%82%93%e3%80%81%e3%82%b3%e3%83%a1%e3%83%b3%e3%83%88%e3%81%a9%e3%81%86%e3%82%82%e3%81%a7%e3%81%99%e3%80%82%0d%0amogya%e3%81%95%e3%82%93%e3%81%ab%e6%95%99%e3%81%88%e3%81%a6%e3%82%82%e3%82%89%e3%81%a3%e3%81%9f%e6%96%b9%e6%b3%95%e3%81%a7%e3%81%84%e3%81%91%e3%81%9d%e3%81%86%e3%81%a7%e3%81%99%e3%80%82%0d%0a%e5%86%85%e9%83%a8%e3%81%ae%e4%bb%95%e7%b5%84%e3%81%bf%e3%81%af%e3%82%88%e3%81%8f%e3%82%8f%e3%81%8b%e3%82%8a%e3%81%be%e3%81%9b%e3%82%93%e3%81%8c%e3%80%81%e3%81%93%e3%82%8c%e3%81%a7%e7%9f%ad%e3%81%8f%e6%9b%b8%e3%81%91%e3%81%be%e3%81%99%e3%81%ad%e3%80%82%28%e3%81%9d%e3%81%ae%e3%81%b8%e3%82%93%e3%81%8cRuby%e3%81%ab%e5%af%be%e3%81%97%e3%81%a6%e5%a5%bd%e3%81%bf%e3%81%8c%e3%82%8f%e3%81%8b%e3%82%8c%e3%82%8b%e3%81%a8%e3%81%93%e3%82%8d%e3%81%a7%e3%81%97%e3%82%87%e3%81%86%e3%81%8c...%29%0d%0a%e4%bb%a5%e4%b8%8b%e3%80%81%e5%ae%9f%e9%a8%93%e7%b5%90%e6%9e%9c%e3%81%a7%e3%81%99%e3%80%82%0d%0a%0d%0airb%28main%29%3a001%3a0%3e%20class%20A%20%3b%20end%0d%0a%3d%3e%20nil%0d%0airb%28main%29%3a002%3a0%3e%20a%20%3d%20A.new%0d%0a%3d%3e%20%23%3cA%3a0x4023c478%3e%0d%0airb%28main%29%3a003%3a0%3e%20case%20a%0d%0airb%28main%29%3a004%3a1%3e%20when%20A%0d%0airb%28main%29%3a005%3a1%3e%201%0d%0airb%28main%29%3a006%3a1%3e%20when%20B%0d%0airb%28main%29%3a007%3a1%3e%202%0d%0airb%28main%29%3a008%3a1%3e%20else%20%0d%0airb%28main%29%3a009%3a1%2a%203%0d%0airb%28main%29%3a010%3a1%3e%20end%0d%0a%3d%3e%201%0d%0a%0d%0a%e4%bb%8a%e4%bd%9c%e3%81%a3%e3%81%a6%e3%81%84%e3%82%8bLisp%e3%82%a4%e3%83%b3%e3%82%bf%e3%83%97%e3%83%aa%e3%82%bf%e3%82%92%e3%81%93%e3%81%ae%e3%82%b9%e3%82%bf%e3%82%a4%e3%83%ab%e3%81%ab%e7%9b%b4%e3%81%97%e3%81%a6%e3%81%8a%e3%81%8d%e3%81%be%e3%81%99%e3%81%a7%e3%81%99%e3%80%82%0d%0a)
